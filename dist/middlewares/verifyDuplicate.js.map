{"version":3,"sources":["../../src/middlewares/verifyDuplicate.js"],"names":["checkRoleDuplicate","req","res","next","name","body","Role","findOne","roleFound","status","json","message","checkUserDuplicate","username","email","User","userFound1","userFound2","checkDuplicateMarca","Marca","encontrado","checkDuplicateModelo","Modelo","modeloEncontrado","checkDuplicateChasis","Chasis","checkDuplicateVehiculo","cod_tdp","version","Vehicle","encontrado1","checkDuplicateSucursal","Sucursal","checkDuplicateConversion","Conversion"],"mappings":"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","sourcesContent":["import Role from '../models/Role'\r\nimport User from '../models/User'\r\nimport Chasis from '../models/Chasis'\r\nimport Marca from '../models/Marca'\r\nimport Modelo from '../models/Modelo'\r\nimport Sucursal from '../models/Sucursal'\r\nimport Vehicle from '../models/Vehicle'\r\nimport Conversion from '../models/Conversion'\r\n\r\nexport const checkRoleDuplicate = async(req, res, next) => {\r\n    const { name } = req.body\r\n\r\n    const roleFound = await Role.findOne({ name })\r\n\r\n    if (roleFound) return res.status(201).json({ message: 'El rol ya existe' })\r\n\r\n    next()\r\n}\r\n\r\nexport const checkUserDuplicate = async(req, res, next) => {\r\n    const { username, email } = req.body\r\n\r\n    const userFound1 = await User.findOne({ username })\r\n    const userFound2 = await User.findOne({ email })\r\n\r\n    if (userFound1) return res.status(201).json({ message: 'El nombre de usuario ya existe' })\r\n\r\n    if (userFound2) return res.status(201).json({ message: 'El email de usuario ya está registrado' })\r\n\r\n    next()\r\n}\r\n\r\nexport const checkDuplicateMarca = async(req, res, next) => {\r\n    const { name } = req.body;\r\n    const encontrado = await Marca.findOne({ name: name });\r\n\r\n    if (encontrado) return res.status(201).json({ message: 'La Marca ya existe' });\r\n\r\n    next();\r\n}\r\n\r\nexport const checkDuplicateModelo = async(req, res, next) => {\r\n    const { name } = req.body;\r\n    const modeloEncontrado = await Modelo.findOne({ name: name });\r\n\r\n    if (modeloEncontrado) return res.status(201).json({ message: 'El Modelo ya existe' });\r\n\r\n    next();\r\n}\r\n\r\nexport const checkDuplicateChasis = async(req, res, next) => {\r\n    const { name } = req.body;\r\n    const encontrado = await Chasis.findOne({ name: name });\r\n\r\n    if (encontrado) return res.status(201).json({ message: 'El Chasis ya existe' });\r\n\r\n    next();\r\n}\r\n\r\nexport const checkDuplicateVehiculo = async(req, res, next) => {\r\n    const { cod_tdp, version } = req.body;\r\n\r\n    const encontrado = await Vehicle.findOne({ cod_tdp: cod_tdp });\r\n    const encontrado1 = await Vehicle.findOne({ version: version });\r\n\r\n    if (encontrado) return res.status(201).json({ message: 'El COD-TDP ya existe' });\r\n    if (encontrado1) return res.status(201).json({ message: 'El vehículo ya existe' });\r\n\r\n    next();\r\n}\r\n\r\nexport const checkDuplicateSucursal = async(req, res, next) => {\r\n    const { name } = req.body;\r\n\r\n    const encontrado = await Sucursal.findOne({ name: name });\r\n\r\n    if (encontrado) return res.status(201).json({ message: 'La sucursal ya existe' });\r\n\r\n\r\n    next();\r\n}\r\n\r\nexport const checkDuplicateConversion = async(req, res, next) => {\r\n    const { name } = req.body;\r\n\r\n    const encontrado = await Conversion.findOne({ name: name });\r\n\r\n    if (encontrado) return res.status(201).json({ message: 'La Conversion ya existe' });\r\n\r\n\r\n    next();\r\n}"],"file":"verifyDuplicate.js"}