{"version":3,"sources":["../../src/controllers/lead.controller.js"],"names":["leadCtrl","getAll","req","res","Lead","find","populate","path","select","query","length","json","total","all_leads","status","message","console","log","getOneById","leadId","params","findById","one","createOne","body","dataOrigin","customer_name","customer_document","customer_city","customer_cellphone","customer_cellphone2","customer_email","fecha_ingreso","createdBy","newObj","OriginData","findOne","name","originFound","_id","User","username","userFound","save","isNoInteresado","estado_lead","sucursal","fecha_noInteresado","motivoDesplegable","motivo_rechazo","Sucursal","sucursalFound","MotivoRechazo","motivoFound","findByIdAndUpdate","sucursal_lead","isAtendido","fecha_atencion","comentario","observacion","auto","financiamiento","entidad_bancaria","tentativa_inicial","precioUnidad","Vehicle","cod_tdp","autoFound","Financiamiento","financiamientoFound","undefined","tipoFinanciamiento","Banco","bancoFound","isAsignacion","isAsignado","fecha_asignacion","asesorAsignado","Seller","asesorFound","isCotizado","fecha_cotizacion","isDeclinado","fecha_declinado","motivo_desistencia","isConvertido","estado_conversion","fecha_conversion","EstadoConversion","statusFound","isBooking","fecha_booking","isDown","fecha_down","isVenta","fecha_venta","deleteOneById","findByIdAndDelete","leadsBySucursalFecha","start","end","$gte","Date","$lte","sort","leads","leadsByStatusFecha","rankingLeadsConversionByDates","filter","aggregate","$match","$group","num_leads","$sum","$sort","ranking","countLeadsByDates","estado","$regex","countDocuments","qty","countLeadsConversionyDates","rankingLeadsByOriginDataDateConversion","totalLeads"],"mappings":"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","sourcesContent":["import Lead from \"../models/Lead\";\r\nimport User from \"../models/User\";\r\nimport Sucursal from \"../models/Sucursal\";\r\nimport OriginData from \"../models/OriginData\";\r\nimport Vehicle from \"../models/Vehicle\";\r\nimport Financiamiento from \"../models/Financiamiento\";\r\nimport Banco from \"../models/Banco\";\r\nimport Seller from \"../models/Seller\";\r\nimport EstadoConversion from \"../models/EstadoConversion\";\r\nimport MotivoRechazo from '../models/MotivoRechazo';\r\n\r\nconst leadCtrl = {};\r\n\r\nleadCtrl.getAll = async (req, res) => {\r\n\ttry {\r\n\t\tconst query = await Lead.find()\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"sucursal_lead\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"dataOrigin\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"tipoFinanciamiento\",\r\n\t\t\t\tselect: \"tipo\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"entidad_bancaria\",\r\n\t\t\t\tselect: \"name avatar\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"estado_conversion\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"motivoDesplegable\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"auto\",\r\n\t\t\t\tselect: \"chasis model cod_tdp, version\",\r\n\t\t\t\tpopulate: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: \"chasis\",\r\n\t\t\t\t\t\tselect: \"name\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: \"model\",\r\n\t\t\t\t\t\tselect: \"name marca avatar\",\r\n\t\t\t\t\t\tpopulate: {\r\n\t\t\t\t\t\t\tpath: \"marca\",\r\n\t\t\t\t\t\t\tselect: \"name avatar\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"asesorAsignado\",\r\n\t\t\t\tselect: \"name tipo marca avatar\",\r\n\t\t\t\tpopulate: {\r\n\t\t\t\t\tpath: \"marca\",\r\n\t\t\t\t\tselect: \"name avatar\",\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"createdBy\",\r\n\t\t\t\tselect: \"name username\",\r\n\t\t\t});\r\n\r\n\t\tif (query.length > 0) {\r\n\t\t\tres.json({ total: query.length, all_leads: query });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"No existen leads\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.getOneById = async (req, res) => {\r\n\tconst { leadId } = req.params;\r\n\ttry {\r\n\t\tconst query = await Lead.findById(leadId)\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"sucursal_lead\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"dataOrigin\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"tipoFinanciamiento\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"entidad_bancaria\",\r\n\t\t\t\tselect: \"name avatar\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"estado_conversion\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"motivoDesplegable\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"auto\",\r\n\t\t\t\tselect: \"chasis model cod_tdp version\",\r\n\t\t\t\tpopulate: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: \"chasis\",\r\n\t\t\t\t\t\tselect: \"name\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: \"model\",\r\n\t\t\t\t\t\tselect: \"name marca avatar\",\r\n\t\t\t\t\t\tpopulate: {\r\n\t\t\t\t\t\t\tpath: \"marca\",\r\n\t\t\t\t\t\t\tselect: \"name avatar\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"asesorAsignado\",\r\n\t\t\t\tselect: \"name tipo marca avatar\",\r\n\t\t\t\tpopulate: {\r\n\t\t\t\t\tpath: \"marca\",\r\n\t\t\t\t\tselect: \"name avatar\",\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"createdBy\",\r\n\t\t\t\tselect: \"name username\",\r\n\t\t\t});\r\n\r\n\t\tif (query) {\r\n\t\t\tres.json({ one: query });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"No existen el lead\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.createOne = async (req, res) => {\r\n\tconst { dataOrigin, customer_name, customer_document, customer_city, customer_cellphone, customer_cellphone2, customer_email, fecha_ingreso, createdBy } = req.body;\r\n\r\n\ttry {\r\n\t\tconst newObj = new Lead({\r\n\t\t\tcustomer_name,\r\n\t\t\tcustomer_document,\r\n\t\t\tcustomer_city,\r\n\t\t\tcustomer_cellphone,\r\n\t\t\tcustomer_cellphone2,\r\n\t\t\tcustomer_email,\r\n\t\t\tfecha_ingreso,\r\n\t\t});\r\n\r\n\t\tconst originFound = await OriginData.findOne({ name: dataOrigin });\r\n\t\tif (!originFound) return res.status(404).json({ message: `Origen ${dataOrigin} no encontrada` });\r\n\t\tnewObj.dataOrigin = originFound._id;\r\n\r\n\t\tconst userFound = await User.findOne({ username: createdBy });\r\n\t\tif (!userFound) return res.status(404).json({ message: `Empleado ${createdBy} no encontrado` });\r\n\t\tnewObj.createdBy = userFound._id;\r\n\r\n\t\tconst query = await newObj.save();\r\n\r\n\t\tif (query) {\r\n\t\t\tres.json({ message: \"Lead creado con éxito\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.isNoInteresado = async (req, res) => {\r\n\tconst { leadId } = req.params;\r\n\tconst { estado_lead, isNoInteresado, sucursal, fecha_noInteresado,motivoDesplegable, motivo_rechazo } = req.body;\r\n\r\n\ttry {\r\n\t\tconst sucursalFound = await Sucursal.findOne({ name: sucursal });\r\n\t\tif (!sucursalFound) return res.status(404).json({ message: `Sucursal ${sucursal} no encontrada` });\r\n\r\n\t\tconst motivoFound = await MotivoRechazo.findOne({name: motivoDesplegable});\r\n\t\tif(!motivoFound) return res.status(404).json({message: `Motivo ${motivoDesplegable} no encontrado`});\r\n\r\n\t\tconst query = await Lead.findByIdAndUpdate(leadId, {\r\n\t\t\testado_lead,\r\n\t\t\tisNoInteresado,\r\n\t\t\tsucursal_lead: sucursalFound._id,\r\n\t\t\tfecha_noInteresado,\r\n\t\t\tmotivoDesplegable: motivoFound._id,\r\n\t\t\tmotivo_rechazo,\r\n\t\t});\r\n\r\n\t\tif (query) {\r\n\t\t\tres.json({ message: \"Lead actualizado con éxito\" });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"Lead no encontrado para actualizar\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.isAtendido = async (req, res) => {\r\n\tconst { leadId } = req.params;\r\n\tconst { estado_lead, isAtendido, fecha_atencion, comentario, observacion, sucursal, auto, financiamiento, entidad_bancaria, tentativa_inicial, precioUnidad } = req.body;\r\n\r\n\ttry {\r\n\t\tlet query = null;\r\n\r\n\t\tconst sucursalFound = await Sucursal.findOne({ name: sucursal });\r\n\t\tconst autoFound = await Vehicle.findOne({ cod_tdp: auto });\r\n\t\tconst financiamientoFound = await Financiamiento.findOne({ name: financiamiento });\r\n\r\n\t\tif (!sucursalFound) return res.status(404).json({ message: `Sucursal ${sucursal} no encontrada` });\r\n\t\tif (!autoFound) return res.status(404).json({ message: `Vehículo ${auto} no encontrado` });\r\n\t\tif (!financiamientoFound) return res.status(404).json({ message: `Tipo de financiamiento ${financiamiento} no encontrado` });\r\n\r\n\t\tif (entidad_bancaria == null || entidad_bancaria == undefined) {\r\n\t\t\tquery = await Lead.findByIdAndUpdate(leadId, {\r\n\t\t\t\tsucursal_lead: sucursalFound._id,\r\n\t\t\t\testado_lead,\r\n\t\t\t\tisAtendido,\r\n\t\t\t\tfecha_atencion,\r\n\t\t\t\tcomentario,\r\n\t\t\t\tobservacion,\r\n\t\t\t\tauto: autoFound._id,\r\n\t\t\t\ttipoFinanciamiento: financiamientoFound._id,\r\n\t\t\t\ttentativa_inicial,\r\n\t\t\t\tprecioUnidad,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconst bancoFound = await Banco.findOne({ name: entidad_bancaria });\r\n\t\t\tif (!bancoFound) return res.status(404).json({ message: `Entidad ${entidad_bancaria} no encontrado` });\r\n\r\n\t\t\tquery = await Lead.findByIdAndUpdate(leadId, {\r\n\t\t\t\tsucursal_lead: sucursalFound._id,\r\n\t\t\t\testado_lead,\r\n\t\t\t\tisAtendido,\r\n\t\t\t\tfecha_atencion,\r\n\t\t\t\tcomentario,\r\n\t\t\t\tobservacion,\r\n\t\t\t\tauto: autoFound._id,\r\n\t\t\t\ttipoFinanciamiento: financiamientoFound._id,\r\n\t\t\t\tentidad_bancaria: bancoFound._id,\r\n\t\t\t\ttentativa_inicial,\r\n\t\t\t\tprecioUnidad,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (query) {\r\n\t\t\tres.json({ message: \"Lead actualizado con éxito\" });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"Lead no encontrado para actualizar\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.isAsignacion = async (req, res) => {\r\n\tconst { leadId } = req.params;\r\n\tconst { estado_lead, isAsignado, fecha_asignacion, comentario, observacion, asesorAsignado, auto, financiamiento, entidad_bancaria, tentativa_inicial, precioUnidad } = req.body;\r\n\r\n\ttry {\r\n\t\tlet query = null;\r\n\r\n\t\tconst asesorFound = await Seller.findOne({ name: asesorAsignado });\r\n\t\tconst autoFound = await Vehicle.findOne({ cod_tdp: auto });\r\n\t\tconst financiamientoFound = await Financiamiento.findOne({ name: financiamiento });\r\n\r\n\t\tif (!asesorFound) return res.status(404).json({ message: `Asesor ${asesorAsignado} no encontrado` });\r\n\t\tif (!autoFound) return res.status(404).json({ message: `Vehículo ${auto} no encontrado` });\r\n\t\tif (!financiamientoFound) return res.status(404).json({ message: `Tipo de financiamiento ${financiamiento} no encontrado` });\r\n\r\n\t\tif (entidad_bancaria == null || entidad_bancaria == undefined) {\r\n\t\t\tquery = await Lead.findByIdAndUpdate(leadId, {\r\n\t\t\t\testado_lead,\r\n\t\t\t\tisAsignado,\r\n\t\t\t\tfecha_asignacion,\r\n\t\t\t\tcomentario,\r\n\t\t\t\tobservacion,\r\n\t\t\t\tasesorAsignado: asesorFound._id,\r\n\t\t\t\tauto: autoFound._id,\r\n\t\t\t\ttipoFinanciamiento: financiamientoFound._id,\r\n\t\t\t\ttentativa_inicial,\r\n\t\t\t\tprecioUnidad,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconst bancoFound = await Banco.findOne({ name: entidad_bancaria });\r\n\t\t\tif (!bancoFound) return res.status(404).json({ message: `Entidad ${entidad_bancaria} no encontrado` });\r\n\r\n\t\t\tquery = await Lead.findByIdAndUpdate(leadId, {\r\n\t\t\t\testado_lead,\r\n\t\t\t\tisAsignado,\r\n\t\t\t\tfecha_asignacion,\r\n\t\t\t\tcomentario,\r\n\t\t\t\tobservacion,\r\n\t\t\t\tasesorAsignado: asesorFound._id,\r\n\t\t\t\tauto: autoFound._id,\r\n\t\t\t\ttipoFinanciamiento: financiamientoFound._id,\r\n\t\t\t\tentidad_bancaria: bancoFound._id,\r\n\t\t\t\ttentativa_inicial,\r\n\t\t\t\tprecioUnidad,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (query) {\r\n\t\t\tres.json({ message: \"Lead actualizado con éxito\" });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"Lead no encontrado para actualizar\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.isCotizado = async (req, res) => {\r\n\tconst { leadId } = req.params;\r\n\tconst { financiamiento, entidad_bancaria, tentativa_inicial, precioUnidad, estado_lead, isCotizado, fecha_cotizacion, comentario, observacion } = req.body;\r\n\r\n\ttry {\r\n\t\tlet query = null;\r\n\r\n\t\tconst financiamientoFound = await Financiamiento.findOne({ name: financiamiento });\r\n\t\tif (!financiamientoFound) return res.status(404).json({ message: `Tipo de financiamiento ${financiamiento} no encontrado` });\r\n\r\n\t\tif (entidad_bancaria == null || entidad_bancaria == undefined) {\r\n\t\t\tquery = await Lead.findByIdAndUpdate(leadId, {\r\n\t\t\t\ttipoFinanciamiento: financiamientoFound._id,\r\n\t\t\t\ttentativa_inicial,\r\n\t\t\t\tprecioUnidad,\r\n\t\t\t\testado_lead,\r\n\t\t\t\tisCotizado,\r\n\t\t\t\tfecha_cotizacion,\r\n\t\t\t\tcomentario,\r\n\t\t\t\tobservacion,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconst bancoFound = await Banco.findOne({ name: entidad_bancaria });\r\n\t\t\tif (!bancoFound) return res.status(404).json({ message: `Entidad ${entidad_bancaria} no encontrado` });\r\n\r\n\t\t\tquery = await Lead.findByIdAndUpdate(leadId, {\r\n\t\t\t\ttipoFinanciamiento: financiamientoFound._id,\r\n\t\t\t\tentidad_bancaria: bancoFound._id,\r\n\t\t\t\ttentativa_inicial,\r\n\t\t\t\tprecioUnidad,\r\n\t\t\t\testado_lead,\r\n\t\t\t\tisCotizado,\r\n\t\t\t\tfecha_cotizacion,\r\n\t\t\t\tcomentario,\r\n\t\t\t\tobservacion,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (query) {\r\n\t\t\tres.json({ message: \"Lead actualizado con éxito\" });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"Lead no encontrado para actualizar\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.isDeclinado = async (req, res) => {\r\n\tconst { leadId } = req.params;\r\n\tconst { estado_lead, isDeclinado, fecha_declinado, motivo_desistencia, comentario, observacion } = req.body;\r\n\r\n\ttry {\r\n\t\tconst query = await Lead.findByIdAndUpdate(leadId, {\r\n\t\t\testado_lead,\r\n\t\t\tisDeclinado,\r\n\t\t\tfecha_declinado,\r\n\t\t\tmotivo_desistencia,\r\n\t\t\tcomentario,\r\n\t\t\tobservacion,\r\n\t\t});\r\n\r\n\t\tif (query) {\r\n\t\t\tres.json({ message: \"Lead actualizado con éxito\" });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"Lead no encontrado para actualizar\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.isConvertido = async (req, res) => {\r\n\tconst { leadId } = req.params;\r\n\tconst { estado_lead, estado_conversion, isConvertido, fecha_conversion } = req.body;\r\n\r\n\ttry {\r\n\t\tconst statusFound = await EstadoConversion.findOne({ name: estado_conversion });\r\n\t\tif (!statusFound) return res.status(404).json({ message: `Estado ${estado_conversion} no encontrado` });\r\n\r\n\t\tconst query = await Lead.findByIdAndUpdate(leadId, {\r\n\t\t\testado_lead,\r\n\t\t\testado_conversion: statusFound._id,\r\n\t\t\tisConvertido,\r\n\t\t\tfecha_conversion,\r\n\t\t});\r\n\r\n\t\tif (query) {\r\n\t\t\tres.json({ message: \"Lead actualizado con éxito\" });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"Lead no encontrado para actualizar\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.isBooking = async (req, res) => {\r\n\tconst { leadId } = req.params;\r\n\tconst { estado_conversion, isBooking, fecha_booking } = req.body;\r\n\r\n\ttry {\r\n\t\tconst statusFound = await EstadoConversion.findOne({ name: estado_conversion });\r\n\t\tif (!statusFound) return res.status(404).json({ message: `Estado ${estado_conversion} no encontrado` });\r\n\r\n\t\tconst query = await Lead.findByIdAndUpdate(leadId, {\r\n\t\t\testado_conversion: statusFound._id,\r\n\t\t\tisBooking,\r\n\t\t\tfecha_booking,\r\n\t\t});\r\n\r\n\t\tif (query) {\r\n\t\t\tres.json({ message: \"Lead actualizado con éxito\" });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"Lead no encontrado para actualizar\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.isDown = async (req, res) => {\r\n\tconst { leadId } = req.params;\r\n\tconst { estado_conversion, isDown, fecha_down } = req.body;\r\n\r\n\ttry {\r\n\t\tconst statusFound = await EstadoConversion.findOne({ name: estado_conversion });\r\n\t\tif (!statusFound) return res.status(404).json({ message: `Estado ${estado_conversion} no encontrado` });\r\n\r\n\t\tconst query = await Lead.findByIdAndUpdate(leadId, {\r\n\t\t\testado_conversion: statusFound._id,\r\n\t\t\tisDown,\r\n\t\t\tfecha_down,\r\n\t\t});\r\n\r\n\t\tif (query) {\r\n\t\t\tres.json({ message: \"Lead actualizado con éxito\" });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"Lead no encontrado para actualizar\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.isVenta = async (req, res) => {\r\n\tconst { leadId } = req.params;\r\n\tconst { estado_conversion, isVenta, fecha_venta } = req.body;\r\n\r\n\ttry {\r\n\t\tconst statusFound = await EstadoConversion.findOne({ name: estado_conversion });\r\n\t\tif (!statusFound) return res.status(404).json({ message: `Estado ${estado_conversion} no encontrado` });\r\n\r\n\t\tconst query = await Lead.findByIdAndUpdate(leadId, {\r\n\t\t\testado_conversion: statusFound._id,\r\n\t\t\tisVenta,\r\n\t\t\tfecha_venta,\r\n\t\t});\r\n\r\n\t\tif (query) {\r\n\t\t\tres.json({ message: \"Lead actualizado con éxito\" });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"Lead no encontrado para actualizar\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.deleteOneById = async (req, res) => {\r\n\tconst { leadId } = req.params;\r\n\r\n\ttry {\r\n\t\tconst query = await Lead.findByIdAndDelete(leadId);\r\n\r\n\t\tif (query) {\r\n\t\t\tres.json({ message: \"Lead eliminado con éxito\" });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"Lead no encontrado para eliminar\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.leadsBySucursalFecha = async (req, res) => {\r\n\tconst { start, end } = req.body;\r\n\r\n\ttry {\r\n\t\tconst query = await Lead.find({\r\n\t\t\tfecha_ingreso: {\r\n\t\t\t\t$gte: new Date(start),\r\n\t\t\t\t$lte: new Date(end),\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.sort({ fecha_ingreso: -1 })\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"sucursal_lead\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"dataOrigin\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"tipoFinanciamiento\",\r\n\t\t\t\tselect: \"tipo\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"entidad_bancaria\",\r\n\t\t\t\tselect: \"name avatar\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"estado_conversion\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"auto\",\r\n\t\t\t\tselect: \"chasis model cod_tdp, version\",\r\n\t\t\t\tpopulate: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: \"chasis\",\r\n\t\t\t\t\t\tselect: \"name\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: \"model\",\r\n\t\t\t\t\t\tselect: \"name marca avatar\",\r\n\t\t\t\t\t\tpopulate: {\r\n\t\t\t\t\t\t\tpath: \"marca\",\r\n\t\t\t\t\t\t\tselect: \"name avatar\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"asesorAsignado\",\r\n\t\t\t\tselect: \"name tipo marca avatar\",\r\n\t\t\t\tpopulate: {\r\n\t\t\t\t\tpath: \"marca\",\r\n\t\t\t\t\tselect: \"name avatar\",\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"createdBy\",\r\n\t\t\t\tselect: \"name username\",\r\n\t\t\t});\r\n\r\n\t\tif (query.length > 0) {\r\n\t\t\tres.json({ total: query.length, leads: query });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"No existen leads\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.leadsByStatusFecha = async (req, res) => {\r\n\tconst { estado_lead, start, end } = req.body;\r\n\r\n\ttry {\r\n\t\tconst query = await Lead.find({\r\n\t\t\testado_lead,\r\n\t\t\tisConvertido: true,\r\n\t\t\tfecha_conversion: {\r\n\t\t\t\t$gte: new Date(start),\r\n\t\t\t\t$lte: new Date(end),\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.sort({ fecha_conversion: -1 })\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"sucursal_lead\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"dataOrigin\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"tipoFinanciamiento\",\r\n\t\t\t\tselect: \"tipo\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"entidad_bancaria\",\r\n\t\t\t\tselect: \"name avatar\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"estado_conversion\",\r\n\t\t\t\tselect: \"name\",\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"auto\",\r\n\t\t\t\tselect: \"chasis model cod_tdp, version\",\r\n\t\t\t\tpopulate: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: \"chasis\",\r\n\t\t\t\t\t\tselect: \"name\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: \"model\",\r\n\t\t\t\t\t\tselect: \"name marca avatar\",\r\n\t\t\t\t\t\tpopulate: {\r\n\t\t\t\t\t\t\tpath: \"marca\",\r\n\t\t\t\t\t\t\tselect: \"name avatar\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"asesorAsignado\",\r\n\t\t\t\tselect: \"name tipo marca avatar\",\r\n\t\t\t\tpopulate: {\r\n\t\t\t\t\tpath: \"marca\",\r\n\t\t\t\t\tselect: \"name avatar\",\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\t.populate({\r\n\t\t\t\tpath: \"createdBy\",\r\n\t\t\t\tselect: \"name username\",\r\n\t\t\t});\r\n\r\n\t\tif (query.length > 0) {\r\n\t\t\tres.json({ total: query.length, leads: query });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"No existen leads\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.rankingLeadsConversionByDates = async (req, res) => {\r\n\tconst { start, end } = req.body;\r\n\r\n\ttry {\r\n\t\tconst filter = { fecha_ingreso: { $gte: new Date(start), $lte: new Date(end) } };\r\n\t\tconst query = await Lead.aggregate([\r\n\t\t\t{\r\n\t\t\t\t$match: filter,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t$group: {\r\n\t\t\t\t\t_id: \"$estado_conversion\",\r\n\t\t\t\t\tnum_leads: { $sum: 1 },\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t$sort: { num_leads: -1 },\r\n\t\t\t},\r\n\t\t]);\r\n\r\n\t\tif (query.length > 0) {\r\n\t\t\tres.json({ total: query.length, ranking: query });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"No existen leads aún\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.countLeadsByDates = async (req, res) => {\r\n\tconst { estado, start, end } = req.body;\r\n\r\n\ttry {\r\n\t\tconst query = await Lead.find({\r\n\t\t\testado_lead: { $regex: \".*\" + estado + \".*\" },\r\n\t\t\tfecha_ingreso: { $gte: new Date(start), $lte: new Date(end) },\r\n\t\t}).countDocuments();\r\n\t\tif (query >= 0) {\r\n\t\t\tres.json({ qty: query });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.countLeadsConversionyDates = async (req, res) => {\r\n\tconst { isBooking, isVenta, start, end } = req.body;\r\n\r\n\ttry {\r\n\t\t// const conversionState = await EstadoConversion.findOne({ name: estado });\r\n\t\tlet query = null;\r\n\r\n\t\tif (isVenta) {\r\n\t\t\tquery = await Lead.find({\r\n\t\t\t\t// estado_conversion: conversionState._id,\r\n\t\t\t\tisBooking,\r\n\t\t\t\tisVenta,\r\n\t\t\t\tfecha_conversion: { $gte: new Date(start), $lte: new Date(end) },\r\n\t\t\t}).countDocuments();\r\n\t\t} else {\r\n\t\t\tquery = await Lead.find({\r\n\t\t\t\t// estado_conversion: conversionState._id,\r\n\t\t\t\tisBooking,\r\n\t\t\t\tfecha_conversion: { $gte: new Date(start), $lte: new Date(end) },\r\n\t\t\t}).countDocuments();\r\n\t\t}\r\n\r\n\t\tif (query >= 0) {\r\n\t\t\tres.json({ qty: query });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nleadCtrl.rankingLeadsByOriginDataDateConversion = async (req, res) => {\r\n\tconst { start, end, estado_lead, isAsignado, isBooking, isVenta } = req.body;\r\n\r\n\tlet query = null;\r\n\tlet filter = null;\r\n\r\n\ttry {\r\n\t\tif (estado_lead) {\r\n\t\t\tfilter = { estado_lead, isAsignado, fecha_ingreso: { $gte: new Date(start), $lte: new Date(end) } };\r\n\t\t\tquery = await Lead.aggregate([\r\n\t\t\t\t{\r\n\t\t\t\t\t$match: filter,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t$group: {\r\n\t\t\t\t\t\t_id: \"$dataOrigin\",\r\n\t\t\t\t\t\ttotalLeads: { $sum: 1 },\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t$sort: { totalLeads: -1 },\r\n\t\t\t\t},\r\n\t\t\t]);\r\n\t\t} else if (isBooking) {\r\n\t\t\tfilter = { isBooking, fecha_conversion: { $gte: new Date(start), $lte: new Date(end) } };\r\n\t\t\tquery = await Lead.aggregate([\r\n\t\t\t\t{\r\n\t\t\t\t\t$match: filter,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t$group: {\r\n\t\t\t\t\t\t_id: \"$dataOrigin\",\r\n\t\t\t\t\t\ttotalLeads: { $sum: 1 },\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t$sort: { totalLeads: -1 },\r\n\t\t\t\t},\r\n\t\t\t]);\r\n\t\t} else if (isVenta) {\r\n\t\t\tfilter = { isVenta: isVenta, fecha_conversion: { $gte: new Date(start), $lte: new Date(end) } };\r\n\t\t\tquery = await Lead.aggregate([\r\n\t\t\t\t{\r\n\t\t\t\t\t$match: filter,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t$group: {\r\n\t\t\t\t\t\t_id: \"$dataOrigin\",\r\n\t\t\t\t\t\ttotalLeads: { $sum: 1 },\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t$sort: { totalLeads: -1 },\r\n\t\t\t\t},\r\n\t\t\t]);\r\n\t\t}\r\n\r\n\t\tif (query.length > 0) {\r\n\t\t\tres.json({ total: query.length, ranking: query });\r\n\t\t} else {\r\n\t\t\treturn res.status(404).json({ message: \"No existen leads aún\" });\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\treturn res.status(503).json({ message: err.message });\r\n\t}\r\n};\r\n\r\nexport default leadCtrl;\r\n"],"file":"lead.controller.js"}